<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:replace="fragments/header :: header-bootstrap-config" />
    <th:block th:replace="fragments/header :: header-bootstrap-config-IE" />

    <link rel="stylesheet" th:href="@{/css/left_menu.css}" type="text/css" href="../../static/css/left_menu.css" />
    <link rel="stylesheet" th:href="@{/css/main_content.css}" type="text/css" href="../static/css/main_content.css" />
    <link rel="stylesheet" th:href="@{/css/table.css}" type="text/css" href="../static/css/table.css" />

    <style>
        #order-table {
            margin: 0 15px;
        }
    </style>
</head>
<body class="body-color">

<div class="row">

    <div th:replace="fragments/left_menu :: left-menu-header">
    </div>

    <!-- Main Content -->
    <div class="container-fluid">
        <div class="side-body">
            <div class="row">
                <div class="col-lg-10 col-md-10 col-md-offset-1 col-lg-offset-1">

                    <h1>Actual Orders</h1>

                    <div id="order-table">
                        <div class="alert alert-info" id="update-alert" role="alert" style="display: none">
                            Order list got changed. Please refresh the page to see updates.
                        </div>

                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Sender Name</th>
                                    <th>Sender Address</th>
                                    <th>Sender Phone</th>
                                    <th>Receiver Name</th>
                                    <th>Receiver Address</th>
                                    <th>Receiver Phone</th>
                                    <th>Order Status</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="order: ${orders}">
                                    <td th:text="${order.id}">#</td>
                                    <td th:text="${order.senderContact.firstName}">Sender Name</td>
                                    <td th:text="${order.senderAddress.name}">Sender Address</td>
                                    <td th:text="${order.senderContact.phoneNumber}">Sender Phone</td>
                                    <td th:text="${order.receiverContact.firstName}">Receiver Name</td>
                                    <td th:text="${order.receiverAddress.name}">Receiver Address</td>
                                    <td th:text="${order.receiverContact.phoneNumber}">Receiver Phone</td>
                                    <td th:text="${order.orderStatus.name}">Order Status</td>
                                    <td>
                                        <form method="POST" th:action="@{'/call-center/orders/' + ${order.id} + '/confirm'}">
                                            <button class="btn btn-link update">Confirm</button>
                                        </form>
                                    </td>
                                    <td>
                                        <form method="POST" th:action="@{'/call-center/orders/' + ${order.id} + '/reject'}">
                                            <button class="btn btn-link delete">Reject</button>
                                        </form>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<th:block th:replace="fragments/footer :: footer" />
<th:block th:replace="fragments/left_menu :: left-menu-footer" />

<script type="text/javascript">
    var callCenterTasks = document.getElementById("call_center_tasks_actual");
    callCenterTasks.className="active";
    var updateAlert = document.getElementById("update-alert");
    var handlers = {
        "task": function(msg) {
            updateAlert.style.display = "block";
        }
    };
    connect(handlers);
</script>

</body>
</html>